#!/usr/bin/sage
# vi:syntax=python

load('ecclib.sage')

#s = mod((m+x*y)/r,gord)

p1 = 183205203210132201197199204132212197199207201216132219
p2 = 205216204132197132200205202202201214201210216132214197
p3 = 210200211209132210217209198201214
s1 = 3389357348686070091207897188394148550713658859836306584694
s2 = 777448200177394756542205837596735822505372613564208282967
s3 = 1236649753039292879418292403227467653294516513316727474591
y  = 3879558255773583871318529489627484526871971102926600533305
q  = 4116989120164370464074936649176816640646319373726065033017
r2  = ((p1-p2)/(s1-s2))%q
#r2 = ((p2-p3)/(s2-s3))%q
r = ((p1-p3)/(s1-s3))%q

#print (r==r2)
print(r)
print(r2)
print(gcd(q,r))
print(gcd(q,r2))
print(gcd(r,r2))
#print(r2)
#print(r3)
var('x')
z1 = (-s1*r+p1)
z2 = (-s2*r+p2)
z3 = (-s3*r+p3)
print z1
print z2
print z3
#print solve_mod([x*(s1-s2)==(p1-p2)],q)
print factor(q)
#G=[389274768686887, 0,8233978240328740928149873298479238749764872364786237842641]
#X = ECSearch(y,y+1,G)
#print(X)
#i = 1
#g=[3762,853000057949793721021245114368257091346280262769544798796]
#while true:
#    if ECTimes(g,i,G) == X:
#        print i
#        break
#    else:
#        i += 1
#print i
#print solve_mod([1==x*-302762775343102891039266989745402027145003141933954641541515517639730917845991294519930315, 1==x*-69447494187196694847927437270049726570666695754651078877332704178439408438681104576670890, 1==x*-110466815044652861374258561222933561361310934395716270011985471145412171624777297123708137], 4116989120164370464074936649176816640646319373726065033017)


#print( solve_mod((p1+x*3879558255773583871318529489627484526871971102926600533305)/r == s1,q) )
#print( solve_mod((p2+x*3879558255773583871318529489627484526871971102926600533305)/r == s2,q) )
#print( solve_mod((210200211209132210217209198201214-x*3879558255773583871318529489627484526871971102926600533305)/r == s3,q) )

